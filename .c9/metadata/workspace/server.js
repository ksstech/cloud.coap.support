{"changed":false,"filter":false,"title":"server.js","tooltip":"/server.js","value":"'use strict';\nvar winston = require('winston');\nvar config = require('./config.js');\nvar data = require('./lib/data.js');\nvar mqttServer = require('./lib/mqttServer')\n\n//TODO: add program(commander) options\n\n////////////////////////////////////\n//STARTING UP\n////////////////////////////////////\nconsole.log(\"\");\nconsole.log(\"DDD          SSSS        N   N \");\nconsole.log(\"D  DD   I   S        O   NN  N    A\");\nconsole.log(\"D    D  I    SSS    O O  N N N   AAA\");\nconsole.log(\"D  DD   I       S    O   N  NN  A   A\");\nconsole.log(\"DDD         SSSS         N   N\");\nconsole.log(\"                              \");\nconsole.log('Starting ze service...');\nconsole.log(\"\");\n\n//start up logging\n/////////////////////////////////\nvar logger = new winston.Logger({\n  transports: [\n    new winston.transports.Console({ handleExceptions: true, timestamp: true}),\n    new winston.transports.File({ filename: 'disona.log', handleExceptions: true, timestamp: true })\n  ],\n  exitOnError: false\n});\nif (config.logging.file == false) logger.remove(winston.transports.File);\nif (config.logging.console == false) logger.remove(winston.transports.Console);\nlogger.info('Logger is humming...');\n\n//start up mongo service\n//////////////////////////////////////\nvar mongo = new data(logger);\n\n// start mqtt\nvar mqtt = new mqttServer(logger);\n\n//start coap\nvar coapServer = require(\"./lib/coapServer\")(logger, mongo, mqtt);\n\n//start http\n//var httpServer = require('./lib/httpServer')(logger, mongo);\n\n//var disonaServer = require('./lib/disonaServer.js')(config,mqttServer);\n\n\n","undoManager":{"stack":[],"mark":-1,"position":-1},"ace":{"folds":[],"customSyntax":"javascript","scrolltop":360,"scrollleft":0,"selection":{"start":{"row":45,"column":2},"end":{"row":45,"column":2},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":24,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1432011481000}